<!DOCTYPE html><html lang="pt-br"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsSpy</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/backredirect.css">
    <style>
        #camera {
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            text-align: center;
        }
        #snapshot {
            display: block;
            margin: 20px auto;
            background-color: #28a745;
            color: white;
            padding: 30px 20px;
            border: 5px;
            cursor: pointer;
        }
        #videoElement {
            width: 100%;
            height: auto;
            border: 1px solid black;
            display: none; /* Inicialmente oculto */
        }
        #photoCanvas {
            display: none; /* Oculto inicialmente */
            width: 100%;
        }
        #randomImage {
            width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <img src="images/logo.png" alt="WhatsSpy Logo" class="logo">
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="box warning-box">
            <div class="alert">
                <strong>O NÚMERO PODE RECEBER UM ALERTA DIZENDO QUE VOCÊ ESTÁ MONITORANDO ELE!</strong>
            </div>

            <div class="caution">
                <h2>⚠️ ATENÇÃO! ⚠️</h2>
            </div>

            <!-- Câmera -->
            <div id="camera">
                <!-- Imagem aleatória inicialmente visível -->
                <img id="randomImage" src="images/IMG-0527.jpeg" alt="Imagem Aleatória">
                <!-- Elemento de vídeo da câmera oculto inicialmente -->
                <video id="videoElement" autoplay=""></video>
                <!-- Canvas para exibir a foto tirada -->
                <canvas id="photoCanvas"></canvas>
            </div>

            <!-- Botão para tirar foto -->
            <button id="snapshot">ACESSAR VERSÃO PAGA COM DESCONTO!</button>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <img src="images/logo.png" alt="WhatsSpy Logo" class="footer-logo">
        <p>Termos de Uso - Políticas de Privacidade</p>
        <p>WhatsSpy 2024 ©</p>
    </footer>

    <script>
        const video = document.getElementById('videoElement');
        const canvas = document.getElementById('photoCanvas');
        const randomImage = document.getElementById('randomImage');
        const context = canvas.getContext('2d');
        const snapshotButton = document.getElementById('snapshot');
        let cameraAccessGranted = false; // Flag para verificar o acesso à câmera
        let photoCaptured = false; // Flag para verificar se a foto foi capturada

        // Pedir permissão para acessar a câmera frontal assim que a página carrega
        window.onload = function() {
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({
                    video: { facingMode: "user" } // Especifica a câmera frontal
                }).then(function(stream) {
                    video.srcObject = stream;
                    cameraAccessGranted = true; // Acesso à câmera concedido
                }).catch(function(error) {
                    console.error("Erro ao acessar a câmera: ", error);
                    // Se o acesso à câmera não for concedido, redireciona no primeiro clique
                    snapshotButton.addEventListener('click', function() {
                        window.location.href = "https://go.tribopay.com/rxhnh"; // Substitua pela URL desejada
                    });
                });
            }
        }

        // Função para capturar a foto e redirecionar
        snapshotButton.addEventListener('click', function() {
            if (!photoCaptured) {
                if (cameraAccessGranted) {
                    // Tira a foto imediatamente
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    context.drawImage(video, 0, 0, canvas.width, canvas.height);

                    // Oculta a imagem aleatória e o vídeo, mostrando a foto capturada no canvas
                    randomImage.style.display = 'none'; // Oculta a imagem aleatória
                    video.style.display = 'none'; // Mantém o vídeo oculto
                    canvas.style.display = 'block'; // Exibe a foto tirada no canvas

                    // Reproduz o som
                    const audio = new Audio('kw9ls7zcyaufe1mg4e8q750g.mp3');
                    audio.play();
                    
                    // Define que a foto foi capturada
                    photoCaptured = true;
                }
            } else {
                // Redirecionar após o segundo clique
                window.location.href = "https://go.tribopay.com/rxhnh"; // Substitua pela URL desejada
            }
        });
    </script>


</body></html>