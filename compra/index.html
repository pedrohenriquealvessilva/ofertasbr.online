<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compra</title>
    <style>
        body {
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        button {
            padding: 20px 40px;
            font-size: 20px;
            border: none;
            border-radius: 5px;
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

    <!-- Facebook Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '496838976181061');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
        src="https://www.facebook.com/tr?id=496838976181061&ev=PageView&noscript=1"
    /></noscript>
    <!-- Fim do CÃ³digo do Pixel do Facebook -->

    <button id="compraButton">Comprar</button>

    <script>
        let conversionValue = 187.36;
        let clickCount = 0;
        document.getElementById('compraButton').addEventListener('click', function() {
            clickCount++;
            let purchaseType = 'normal';
            let purchaseCount = 1;
            if (clickCount % 5 === 0) {
                purchaseType = 'unique';
                purchaseCount = 3;
            } else if (clickCount % 3 === 0) {
                purchaseType = 'normal';
                purchaseCount = 5;
            }
            
            fbq('track', 'Purchase', {
                value: conversionValue,
                currency: 'BRL',
                purchase_type: purchaseType,
                purchase_count: purchaseCount,
                roi: 5  // Simulated ROI value
            }, {
                eventID: 'unique_event_id_' + new Date().getTime(),
                custom_data: {
                    profitability: conversionValue,
                    cost_per_purchase: 2.77
                }
            });
            conversionValue += 187.36;
        });
    </script>
</body>
</html>
